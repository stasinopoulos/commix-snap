name: commix
base: core20
adopt-info: commix
summary: Command Injection Exploiter
description: |
  **Commix** (short for [**comm**]and [**i**]njection e[**x**]ploiter) is an open source penetration testing tool, 
  written by **[Anastasios Stasinopoulos](https://github.com/stasinopoulos)** (**[@ancst](https://twitter.com/ancst)**), 
  that automates the detection and exploitation of **[command injection](https://www.owasp.org/index.php/Command_Injection)** vulnerabilities.

  ![Screenshot](https://commixproject.com/images/background.png)

  To get a list of all options and switches use:

      $ python commix.py -h

  To get an overview of commix available options, switches and/or basic ideas on how to use commix, check **[usage](https://github.com/commixproject/commix/wiki/Usage)**, 
  **[usage examples](https://github.com/commixproject/commix/wiki/Usage-Examples)** and **[filters bypasses](https://github.com/commixproject/commix/wiki/Filters-Bypasses)** 
  wiki pages.

icon: commix.png

grade: stable
confinement: strict

license: GPL-3.0-or-later
source-code: https://github.com/commixproject/commix
issues: https://github.com/commixproject/commix/issues

architectures:
  - build-on: amd64
  - build-on: arm64
  - build-on: armhf

parts:
  commix:
    plugin: python
    source: https://github.com/commixproject/commix.git
    override-pull: |
      snapcraftctl pull
      #snapcraftctl set-version $(head -n 1 doc/CHANGELOG.md | awk -F " " '{ print $3$4 }' | awk -F '(' '{ print $1"-"$2 }' | awk -F ')' '{ print $1 }')
      snapcraftctl set-version $(git describe --tags --long ) #| awk -F " " '{ print $1"-latest" }')

    override-build: |
      snapcraftctl build
      cp -r src/txt $SNAPCRAFT_PART_INSTALL/lib/python3.8/site-packages/src/

apps:
  commix:
    command: bin/commix
    environment:
      LC_ALL: C.UTF-8
      LANG: C.UTF-8
    plugs: [home, network]
